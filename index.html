<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chef Tools â€” Menu Planner & Ingredient Converter</title>
  <link rel="stylesheet" href="style.css"/>
  <meta name="description" content="Unified static app with Menu Planner and Ingredient Converter, switchable via tabs."/>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <h1>Chef Tools</h1>
      <p>Menu Planner & Ingredient Converter</p>
    </div>

    <!-- Tabs -->
    <nav class="tabbar" role="tablist" aria-label="Chef Tools tabs">
      <button id="tabbtn-menu" class="tab active" data-tab="menu"
              role="tab" aria-selected="true" aria-controls="tab-menu">
        Menu Planner
      </button>
      <button id="tabbtn-converter" class="tab" data-tab="converter"
              role="tab" aria-selected="false" aria-controls="tab-converter">
        Ingredient Converter
      </button>
    </nav>
  </header>

  <main class="app-main">

    <!-- MENU PLANNER TAB -->
    <section id="tab-menu" class="tab-content active" role="tabpanel" aria-labelledby="tabbtn-menu">
      <h2>Menu Planner</h2>
      <p class="intro">
        Build a menu, assign ingredients with per-dish amounts and units, set your expected diners,
        then generate a shopping list with pricing. Your ingredient catalog & recipes are saved locally.
      </p>

      <!-- Menu Section -->
      <section id="menu-section">
        <h3>Menu</h3>
        <p>Enter the dishes for your event. Each dish has a name and optional description.</p>
        <table id="menu-table">
          <thead>
            <tr>
              <th>Dish Name</th>
              <th>Description</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- rows injected -->
          </tbody>
        </table>
        <button id="add-dish-btn" class="add-btn">Add Dish</button>
      </section>

      <!-- Ingredients Section -->
      <section id="ingredients-section">
        <h3>Ingredients</h3>
        <p>Assign ingredients to each dish along with the amount needed per dish and its unit.</p>
        <table id="ingredients-table">
          <thead>
            <tr>
              <th>Dish</th>
              <th>Ingredient</th>
              <th>Amount</th>
              <th>Unit</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- rows injected -->
          </tbody>
        </table>
        <button id="add-ingredient-btn" class="add-btn">Add Ingredient</button>
      </section>

      <!-- Expected Seats Section -->
      <section id="seats-section">
        <h3>Expected Seats (Number of Diners)</h3>
        <input type="number" id="expected-seats" min="1" value="1" />
      </section>

      <!-- Generate Shopping List Button -->
      <section id="generate-section">
        <button id="generate-btn" class="primary-btn">Generate Shopping List</button>
      </section>

      <!-- Shopping List Section -->
      <section id="shopping-section">
        <h3>Shopping List</h3>
        <p>Select how you plan to purchase each ingredient (number and type of unit) and enter a price.
        Prices are saved to the catalog and reused next time.</p>
        <table id="shopping-table">
          <thead>
            <tr>
              <th>Ingredient</th>
              <th>Total Needed</th>
              <th>Unit</th>
              <th>Number of Units</th>
              <th>Type of Unit</th>
              <th>Price</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- rows injected -->
          </tbody>
        </table>
        <button id="clear-shopping-btn" class="secondary-btn">Clear Shopping List</button>
      </section>

      <!-- Ingredient Catalog Section -->
      <section id="catalog-section">
        <h3>Ingredient Catalog</h3>
        <p>The catalog stores prices per unit for ingredients. Entries are automatically created when you add prices in the shopping list.</p>
        <table id="catalog-table">
          <thead>
            <tr>
              <th>Ingredient</th>
              <th>Number of Units</</th>
              <th>Unit</th>
              <th>Price per Unit</th>
            </tr>
          </thead>
          <tbody>
            <!-- rows injected -->
          </tbody>
        </table>
      </section>
    </section>

    <!-- INGREDIENT CONVERTER TAB -->
    <section id="tab-converter" class="tab-content" role="tabpanel" aria-labelledby="tabbtn-converter" hidden>
      <h2>Ingredient Converter</h2>
      <p class="intro">
        Convert metric weights or volume to US cups / tbsp / tsp for common ingredients.
        Add your own densities (grams per US cup). Saved in your browser.
      </p>

      <div id="debugBanner" role="status" aria-live="polite" class="debug-banner" style="display:none"></div>

      <section class="card">
        <div class="controls">
          <button id="addRowBtn">âž• Add Ingredient</button>
          <button id="copyTableBtn">ðŸ“‹ Copy All</button>
          <button id="exportCSVBtn">ðŸ’¾ Export CSV</button>
          <div class="flex-spacer"></div>
          <label class="muted"><input id="autoConvertToggle" type="checkbox" checked> Auto-convert</label>
        </div>

        <div class="table-wrapper">
          <table id="convTable" aria-label="Ingredient conversions">
            <thead>
              <tr>
                <th class="col-ingredient">Ingredient</th>
                <th class="col-amount">Amount</th>
                <th class="col-unit">Unit</th>
                <th class="col-conversions">Conversions</th>
                <th class="col-actions">Actions</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <p class="help">Tip: type an override name to label copies and exports. Add custom densities below.</p>
      </section>

      <section class="card">
        <h3 style="margin:0 0 8px 0">Ingredient Manager</h3>
        <p class="help">Add/edit ingredient densities (grams per US cup). Data saved in your browser.</p>

        <div class="dense-row">
          <input id="newIngName" type="text" placeholder="Ingredient name" class="grow"/>
          <input id="newIngDensity" type="number" placeholder="g per cup" class="w-140"/>
          <button id="addIngredientBtn">âž• Add</button>
        </div>

        <div id="ingList" class="ing-list"></div>

        <div class="dense-row top-gap">
          <button id="resetDefaults" class="secondary">Reset Defaults</button>
          <button id="clearStorage" class="secondary outline">Clear Saved</button>
        </div>

        <div class="saved-count"><strong>Saved ingredients:</strong> <span id="savedCount" class="muted"></span></div>
      </section>
    </section>

  </main>

  <footer class="app-footer">
    <p>Data is saved locally in your browser. To start over, clear your local storage.</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
